{%- comment -%}
  Size Guide Modal
  Opens when clicking on .product-detail__size-guide trigger
{%- endcomment -%}

<div class="size-guide-modal" id="size-guide-modal">
  <div class="size-guide-modal__overlay"></div>
  <div class="size-guide-modal__content">
    <button class="size-guide-modal__close" aria-label="Close">
      <img src="{{ 'close-button.svg' |  asset_url }}" alt="Close icon" width="15" height="15">
    </button>

    <div class="size-guide-modal__table-wrapper">
      <div class="size-guide-modal__table">
        <div class="size-guide-modal__column">
          <div class="size-guide-modal__cell">US - Men's</div>
          <div class="size-guide-modal__cell">US - Women's</div>
          <div class="size-guide-modal__cell">UK</div>
          <div class="size-guide-modal__cell">EU</div>
        </div>
        <div class="size-guide-modal__column size-guide-modal__column--gray">
          <div class="size-guide-modal__cell">3.5</div>
          <div class="size-guide-modal__cell">5</div>
          <div class="size-guide-modal__cell">3</div>
          <div class="size-guide-modal__cell">35.5</div>
        </div>
        <div class="size-guide-modal__column">
          <div class="size-guide-modal__cell">4</div>
          <div class="size-guide-modal__cell">5.5</div>
          <div class="size-guide-modal__cell">3.5</div>
          <div class="size-guide-modal__cell">36</div>
        </div>
        <div class="size-guide-modal__column size-guide-modal__column--gray">
          <div class="size-guide-modal__cell">4.5</div>
          <div class="size-guide-modal__cell">6</div>
          <div class="size-guide-modal__cell">4</div>
          <div class="size-guide-modal__cell">36.5</div>
        </div>
        <div class="size-guide-modal__column">
          <div class="size-guide-modal__cell">5</div>
          <div class="size-guide-modal__cell">6.5</div>
          <div class="size-guide-modal__cell">4.5</div>
          <div class="size-guide-modal__cell">37.5</div>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  .size-guide-modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 9999;
  }

  .size-guide-modal.is-open {
    display: block;
  }

  .size-guide-modal__overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
  }

  .size-guide-modal__content {
    padding: 32px 16px;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #ffffff;
    width: calc(100% - 32px);
    min-width: 343px;
    max-width: 644px;
  }

  @media (min-width: 768px) {
    .size-guide-modal__content {
      padding: 48px;
    }
  }

  .size-guide-modal__close {
    position: absolute;
    top: 10px;
    right: 10px;
    background: none;
    border: none;
    cursor: pointer;
    padding: 0;
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  @media (min-width: 768px) {
    .size-guide-modal__close {
      top: 16px;
      right: 24px;
    }
  }

  .size-guide-modal__close:hover {
    opacity: 0.7;
  }

  .size-guide-modal__table-wrapper {
    width: 100%;
    overflow-x: auto;
  }

  .size-guide-modal__table {
    width: 100%;
    display: flex;
    gap: 0;
  }

  .size-guide-modal__column {
    display: flex;
    flex-direction: column;
    gap: 16px;
    flex: 1;
  }

  .size-guide-modal__column:first-child {
    min-width: 100px;
    max-width: 140px;
  }

  .size-guide-modal__column:not(:first-child) {
    min-width: 36px;
    max-width: 100px;
  }

  .size-guide-modal__column--gray {
    background: #f5f5f5;
  }

  .size-guide-modal__cell {
    font-weight: 400;
    font-size: 16px;
    line-height: 24px;
    height: 36px;
    color: #111111;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  @media (min-width: 768px) {
    .size-guide-modal__cell {
      height: 40px;
    }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const modal = document.getElementById('size-guide-modal');
    const trigger = document.querySelector('.product-detail__size-guide');
    const closeBtn = modal.querySelector('.size-guide-modal__close');
    const overlay = modal.querySelector('.size-guide-modal__overlay');

    if (trigger) {
      trigger.addEventListener('click', function () {
        modal.classList.add('is-open');
        document.body.style.overflow = 'hidden';
      });
    }

    if (closeBtn) {
      closeBtn.addEventListener('click', function () {
        modal.classList.remove('is-open');
        document.body.style.overflow = '';
      });
    }

    if (overlay) {
      overlay.addEventListener('click', function () {
        modal.classList.remove('is-open');
        document.body.style.overflow = '';
      });
    }

    // Close on ESC key
    document.addEventListener('keydown', function (e) {
      if (e.key === 'Escape' && modal.classList.contains('is-open')) {
        modal.classList.remove('is-open');
        document.body.style.overflow = '';
      }
    });
  });
</script>
